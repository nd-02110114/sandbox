# 作って学ぶ RDBMS の仕組み

## メモ

### 1 章

- RDBMSのアーキテクチャ
  - 構文解析
  - クエリプランナ：実行計画の最適化・決定
    - アクセスメソッドの呼び出し順とかを決める
    - SQLの`Explain` で一部をみることができる
  - クエリエクスキュータ：アクセスメソッドの呼び出し
  - アクセスメソッド：ディスク上のデータ構造をたどる
    - 見に行くだけ、読み書きはしない (探索みたいなイメージ...?)
  - バッファプールマネージャー：データの塊をメモリにキャッシュ
    - アクセスメソッドの要求に応じて、ディスクのデータの貸し出し
    - 直接的な読み書きもここではしない
  - ディスクマネージャ：データの塊をディスクに書く・読む
    - データの読み書き
- セカンダリインデックス
  - いったん放置


### 2 章

- ヒープファイル
  - ファイルを固定の長さ(バイト数)で区切ったもの
  - 区切った単位は「ページ」と呼ばれる、本では4096バイト
  - 必ずページ単位で読み書きする
    - 読みたい内容が100バイトでも4096バイト全てをとってくる
    - これは実際にHDD/SSDに内容を書き込む時にそうなっているから
    - ファイルマネージャーの仕様
- ディスクマネージャ
  - データをページごとに読んだり、書いたりする
  - 実装も比較的そのまま、わかりやすい
- Rust関連
  - AsRef：参照から参照への変換を担うトレイト
    - https://doc.rust-lang.org/std/convert/trait.AsRef.html
    - example をみる限り、面倒な型変換を無くしてくれそう
  - `impl Trait`
    - Genericsの糖衣構文
    - https://doc.rust-jp.rs/book-ja/ch10-02-traits.html
      - 引数としてのトレイトのところに書いてあった
  - Seek : ファイルのカーソルを指定の位置へ移動させる
    - https://doc.rust-lang.org/stable/std/io/trait.Seek.html

### 3 章
